{% extends 'base.html' %}
{% block title %}Upload
{% endblock title %}
{% block body %}
<br/>
<br/>

<div class="container">
  <!-- Content here -->
  <div class="container">
    <div class="row">
      <div class="col">
       
  
        
        
        {%for url in new_url%}
          <img src="{{url}}" width="150" height="150"
        {%endfor%}
        
       
      </div>
      <div class="col">
        <div class="mb-3">
          <label for="exampleFormControlInput1" class="form-label">File name</label>
          <input class="form-control" type="text" value="{{file_name}}" aria-label="readonly input example" readonly>

          <label for="exampleFormControlInput1" class="form-label">Page Numbers</label>
          <input class="form-control" type="text" value="{{page}}" aria-label="readonly input example" readonly>

          <label for="exampleFormControlInput1" class="form-label">Amount</label>
          <input class="form-control" type="text" value="rs.{{cost}}" aria-label="readonly input example" readonly>
          <br/>
          <form action="{% url 'payment' %}" method="POST">
          {% csrf_token %}
            <div class="d-grid gap-2">
              <button class="btn btn-success"  id="rzp-button1" type="button">Pay</button>
              
            </div>
            
            <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
            <script>
            var options = {
                "key": "{{api_key}}", 
                "name": "zeroXnow",
                "description": "Test Transaction",
                
                "order_id": "{{order_id}}", 
                "handler": function (response){
                    alert(response.razorpay_payment_id);
                    alert(response.razorpay_order_id);
                    alert(response.razorpay_signature)
                },
                "prefill": {
                    "name": "Gaurav Kumar",
                    "email": "gaurav.kumar@example.com",
                    "contact": "9999999999"
                },
                "notes": {
                    "address": "Razorpay Corporate Office"
                },
                "theme": {
                    "color": "#3399cc"
                }
            };
            var rzp1 = new Razorpay(options);
            rzp1.on('payment.failed', function (response){
                    alert(response.error.code);
                    alert(response.error.description);
                    alert(response.error.source);
                    alert(response.error.step);
                    alert(response.error.reason);
                    alert(response.error.metadata.order_id);
                    alert(response.error.metadata.payment_id);
            });
            document.getElementById('rzp-button1').onclick = function(e){
                rzp1.open();
                e.preventDefault();
            }
            </script>
            {% comment %} <script
                src="https://checkout.razorpay.com/v1/checkout.js"
                data-key="{{api_key}}"
                data-order_id="{{order_id}}"
                data-buttontext="Pay"
                data-name="PayPrint"
                data-description="A Wild Sheep Chase is the third novel by Japanese author Haruki Murakami"
                data-image="https://example.com/your_logo.jpg"
                data-prefill.name="Utsav Kumar"
                data-prefill.email="u3dofficial@gmail.com"
                data-prefill.contact="9999999999"
                data-theme.color="#00A36C"
            ></script>
            <input type="hidden" custom="Hidden Element" name="hidden"> {% endcomment %}
            </form>

        </div>

        
      </div>
      
    </div>
  </div>

</div>




{% endblock body %}